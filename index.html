<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FastLink Redirect</title>
  <style>
    body { font-family: sans-serif; padding: 2em; }
  </style>

  <!-- Popunder only triggers if redirect param exists -->
  <script>
    const targetURL = new URLSearchParams(window.location.search).get('u');

    if (targetURL) {
      // Trigger ad after slight delay
      setTimeout(() => {
        var adConfig = {
          "ads_host": "a.pemsrv.com",
          "syndication_host": "s.pemsrv.com",
          "idzone": 5653734, 
          "frequency_period": 0,
          "close_on_click": false,
          "debug": false
        };

        var script = document.createElement("script");
        script.src = "https://a.pemsrv.com/popunder1000.js";
        script.async = true;
        script.onload = function () {
          if (typeof window.executePopunder === "function") {
            window.executePopunder(adConfig);
          }
        };
        document.head.appendChild(script);
      }, 500);

      // Redirect user
      setTimeout(() => {
        window.location.href = decodeURIComponent(targetURL);
      }, 300);
    }
  </script>
</head>
<body>
  <h1>Welcome to FastLink</h1>
  <p>This service redirects visitors to selected content and may display advertising links in accordance with EU digital regulations.</p>
  <p>If you're not redirected automatically, <a href="#" id="fallback">click here</a>.</p>
  <script>
    const targetURL = new URLSearchParams(window.location.search).get('u');
    if (targetURL) {
      document.getElementById("fallback").href = decodeURIComponent(targetURL);
    } else {
      document.getElementById("fallback").remove();
    }
  </script>
</body>
</html>
